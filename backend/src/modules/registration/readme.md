# Redis Authorization Module

# Backend

Этот проект предоставляет модуль авторизации с использованием Redis и FastAPI. Модуль включает в себя функционал для
отправки и проверки кодов верификации, а также управление JWT токенами.

### Настройка


1. Настройте переменные окружения:
   Создайте файл `.env` в корне проекта и добавьте следующие переменные:
    ```env
    REDIS_HOST=<ваш_redis_host>
    REDIS_PORT=<ваш_redis_port>
    ```

## Запуск

1. Запустите приложение:
    ```sh
    uvicorn main:app --reload
    ```

2. Откройте браузер и перейдите по адресу [http://localhost:8000/docs](http://localhost:8000/docs) для доступа к
   документации Swagger.

## Структура проекта

- `main.py`: Основной файл для запуска FastAPI приложения.
- `redis_initializer.py`: Инициализация и управление подключением к Redis.
- `reg_module/`: Пакет, содержащий основной функционал модуля авторизации.
    - `routes.py`: Определение маршрутов для авторизации.
    - `schemas.py`: Определение Pydantic схем для валидации данных.
    - `utils.py`: Утилиты для создания и отправки кодов верификации.
    - `jwt_module/`: Подпакет для работы с JWT токенами.
        - `jwt_schemas.py`: Определение типов токенов.
        - `creator.py`: Функции для создания JWT токенов.
        - `depends.py`: Зависимости для работы с JWT токенами.
    - `core/`: Основные настройки и конфигурации.
        - `config.py`: Загрузка конфигураций.

## Маршруты

### POST /auth

Отправка кода верификации на указанный номер телефона.

**Параметры:**

- `phone_number` (формат: `+7123456789`)

**Ответ:**

- `200 OK`: Код верификации успешно отправлен.

### GET /verify_code

Проверка кода верификации и выдача JWT токенов.

**Параметры:**

- `code` (6-значный код)
- `phone_number` (формат: `+7123456789`)

**Ответ:**

- `200 OK`: Аутентификация успешна, токены установлены в cookies.

### GET /refresh_token

Обновление access токена с использованием refresh токена.

**Ответ:**

- `200 OK`: Новый access токен установлен в cookies.

### GET /logout

Выход из системы, удаление токенов из cookies.

**Ответ:**

- `200 OK`: Токены удалены.

### GET /protected

Пример защищенного маршрута.

**Ответ:**

- `200 OK`: Статус успешен.

# Frontend

Этот модуль представляет собой форму регистрации/авторизации, в контексте этого приложения, это одно и тоже
Существует два основных роута

1) /auth/login - для авторизации пользователя (если уже залогинен и выдан jwt токен, то будет переадресация на /)
2) / - защищенный маршрут(если нет логина, будет переадресация на /auth/login)

## Style

Для стилей используется tailwind

### Установка

1) Перейдите в директорию frontend (cd frontend)
2) Установите зависимости

```bash
npm install
```

3) Запустите проект

```bash
npm run dev 
```
